<!DOCTYPE html>
<html lang="ko">
<head>
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval'; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src * 'unsafe-inline'; img-src * data: blob: 'unsafe-inline'; frame-src *; style-src * 'unsafe-inline';">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>[##_page_title_##]</title>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./style.css">
</head>
<body id="[##_body_id_##]">
<s_t3>
    <div class="home-main">
        <div class="home-box">
            <aside class="home-box-left">
                <div class="logo">
                    <a href="[##_blog_link_##]">
                        <img src="./images/logo.png" class="logo-image" alt="LOGO">
                    </a>
                </div>
                <ul class="left-menu">
                    <li data-page="home"><a href="[##_blog_link_##]">HOME</a></li>
                    <li data-page="profile"><a href="[##_blog_link_##]/pages/profile">PROFILE</a></li>
                    <li data-page="notice"><a href="[##_blog_link_##]/category/NOTICE">NOTICE</a></li>
                    <li data-page="gallery"><a href="[##_blog_link_##]/category/GALLERY">GALLERY</a></li>
                </ul>
                <button class="dark-toggle" onclick="toggleDark()">üåô</button>
            </aside>

            <main class="home-box-right">
                <div class="scroll-area">
                    <section class="page-content" data-content="home">
                        <div class="character-wrap">
                            <div id="speech-bubble" class="speech-bubble">ÍπçÍ∞Å!</div>
                            <img src="./images/main_image.png" class="character-image" onclick="kakakEffect()" alt="Main Character">
                        </div>
                    </section>

                    <section class="page-content" data-content="gallery">
                        <div class="gallery-grid">
                            <s_article_rep>
                                <s_index_article_rep>
                                    <div class="gallery-item">
                                        <div class="img-box" onclick="openLightbox('[##_article_rep_thumbnail_url_##]')">
                                            <s_article_rep_thumbnail>
                                                <img src="[##_article_rep_thumbnail_url_##]" alt="gallery-thumb">
                                            </s_article_rep_thumbnail>
                                            <s_article_rep_thumbnail_not_exists>
                                                <div class="no-thumb">No Image</div>
                                            </s_article_rep_thumbnail_not_exists>
                                        </div>
                                    </div>
                                </s_index_article_rep>
                            </s_article_rep>
                        </div>
                        <div class="pagination">
                            <s_paging>
                                <s_paging_rep>
                                    <a [##_paging_rep_link_##] class="num">[##_paging_rep_link_num_##]</a>
                                </s_paging_rep>
                            </s_paging>
                        </div>
                    </section>

                    <section class="page-content" data-content="profile">
                        <div class="page-inner">
                            <s_page_rep>
                                [##_article_rep_desc_##]
                            </s_page_rep>
                        </div>
                    </section>

                    <section class="page-content" data-content="notice">
                        <div class="post-list">
                            <s_article_rep>
                                <s_index_article_rep>
                                    <article class="post-item">
                                        <a href="[##_article_rep_link_##]">
                                            <h3>[##_article_rep_title_##]</h3>
                                            <p class="meta">[##_article_rep_date_##]</p>
                                        </a>
                                    </article>
                                </s_index_article_rep>
                            </s_article_rep>
                        </div>
                    </section>
                </div>
            </main>
        </div>
    </div>
</s_t3>

<div id="lightbox-modal" class="lightbox" onclick="closeLightbox()">
    <span class="close-btn">&times;</span>
    <img class="lightbox-content" id="lightbox-img">
</div>

<script>
    var $j = jQuery.noConflict(); // jQuery Ï∂©Îèå Î∞©ÏßÄ

    // ÌÉ≠ Ï†ÑÌôò Ìï®Ïàò
    function showPage(page){
        $j(".page-content").removeClass("show");
        $j(".left-menu li").removeClass("active");
        
        var target = $j(`[data-content="${page}"]`);
        if(target.length) target.addClass("show");
        $j(`[data-page="${page}"]`).addClass("active");
    }

    // Ï∫êÎ¶≠ÌÑ∞ ÌÅ¥Î¶≠ Ìö®Í≥º (ÍπçÍ∞Å!)
    function kakakEffect() {
        const bubble = document.getElementById('speech-bubble');
        if(!bubble) return;
        const msgs = ["ÏÇ¨ÎûëÌï¥", "Î∞òÍ∞ÄÏõå!", "Ïñ¥ÏÑúÏôÄ!", "Î©ãÏ†∏!", "ÎàåÎ†ÄÏñ¥?"];
        bubble.innerText = msgs[Math.floor(Math.random() * msgs.length)];
        bubble.classList.add('active');
        setTimeout(() => { bubble.classList.remove('active'); }, 1500);
    }

    // ÎùºÏù¥Ìä∏Î∞ïÏä§ Ï†úÏñ¥
    function openLightbox(imgSrc) {
        if (!imgSrc || imgSrc === "" || imgSrc.includes('[')) return;
        $j("#lightbox-modal").css("display", "flex");
        $j("#lightbox-img").attr("src", imgSrc);
        $j("body").css("overflow", "hidden");
    }

    function closeLightbox() {
        $j("#lightbox-modal").hide();
        $j("body").css("overflow", "auto");
    }

    // Îã§ÌÅ¨Î™®Îìú
    function toggleDark(){
        $j("body").toggleClass("dark");
        localStorage.setItem("darkMode", $j("body").hasClass("dark"));
    }

    // Ï¥àÍ∏∞ Î°úÎìú Ïãú URL Í≤ΩÎ°ú Î∂ÑÏÑù Î∞è ÏÑπÏÖò ÏûêÎèô ÌôúÏÑ±Ìôî
    $j(document).ready(function() {
        var path = window.location.pathname;
        
        if (path.includes('/category/GALLERY')) {
            showPage('gallery');
        } else if (path.includes('/category/NOTICE') || path.includes('/category')) {
            showPage('notice');
        } else if (path.includes('/pages/profile')) {
            showPage('profile');
        } else {
            showPage('home');
        }

        if(localStorage.getItem("darkMode") === "true") {
            $j("body").addClass("dark");
        }
    });
</script>
</body>
</html>